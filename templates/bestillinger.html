<!DOCTYPE html>
<html lang="no">

<head>
    <meta charset="UTF-8">
    <title>Bestillinger</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    {% include "navigation/_navbar.html" %}

    <table border="1" cellpadding="8">
        <tr>
            {% if role == 'personlig' %}
            <th>Ordre-ID</th>
            <th>Ordredato og -tid</th>
            <th>Hentedato og -tid</th>
            <th>Status</th>
            <th>Sum</th>
            <th>Detaljer</th>

            {% elif role == 'kjokken' or role == 'okonomi' or role == 'admin' %}
            <th>Ordre-ID</th>
            <th>Kunder</th>
            <th>Ordredato og -tid</th>
            <th>Hentedato og -tid</th>
            <th>Sum</th>
            {% if role == 'admin' %}
            <th>Levert</th>
            <th>Fakturert</th>
            {% endif %}
            <th>Handling</th>

            {% endif %}
        </tr>

        {% for o in order_info %}
        <tr>
            {% if role == 'personlig' %}
            <td>{{ o.id }}</td>
            <td>{{ o.ordre_dato | format_date }} | {{ o.ordre_tid | format_time }}</td>
            <td>{{ o.hent_dato | format_date }} | {{ o.hent_tid | format_time }}</td>
            <td>{{ 'Levert' if o.status_levert else 'Behandling' }}</td>
            <td>{{ o.sum | int }} kr</td>
            <td><a href="/vis-bestilling/{{ o.id }}">Se kvittering</a></td>

            {% elif role == 'kjokken' or role == 'okonomi' or role == 'admin' %}
            <td>{{ o.id }}</td>
            <td>
                {{ o.navn }}
                <p class="les-mer" onclick="toggleReadMore(event)"> Les mer â–¼</p>
                <div class="description" style="display: none;">
                    <p><strong>Kundens-ID:</strong> {{ o.kunde_id }}</p>
                    <p><strong>E-post:</strong> {{ o.epost }}</p>
                    <p><strong>Mobil:</strong> {{ o.mobil }}</p>
                    <p><strong>Organisasjonsnummer:</strong> {{ o.organisasjonsnummer }}</p>
                    <p><strong>Fakturaadresse:</strong> {{ o.fakturaadresse }}</p>
                    <p><strong>Ressursnummer:</strong> {{ o.ressursnummer }}</p>
                    <p><strong>Koststed:</strong> {{ o.koststed }}</p>
                </div>
            </td>
            <td>{{ o.ordre_dato | format_date }} | {{ o.ordre_tid | format_time }}</td>
            <td>{{ o.hent_dato | format_date }} | {{ o.hent_tid | format_time }}</td>
            <td>{{ o.sum | int }} kr</td>
            {% endif %}

            {% if role == 'kjokken' %}
            <td>
                <a href="/vis-bestilling/{{ o.id }}" style="padding-right: 20px;">Vis</a>
                <form method="POST" action="/sett-levert/{{ o.id }}" class="inline-form">
                    <button type="submit">âœ”ï¸ Sett som levert</button>
                </form>
            </td>

            {% elif role == 'okonomi' %}
            <td>
                <a href="/vis-bestilling/{{ o.id }}" style="padding-right: 20px;">Vis</a>
                <form method="POST" action="/sett-fakturert/{{ o.id }}" class="inline-form">
                    <button type="submit">ğŸ“¦ Merk som fakturert</button>
                </form>
            </td>

            {% elif role == 'admin' %}
            <td>{{ 'âœ”ï¸' if o.status_levert else 'âŒ' }}</td>
            <td>{{ 'âœ”ï¸' if o.status_fakturert else 'âŒ' }}</td>
            <td>
                <a href="/vis-bestilling/{{ o.id }}" style="padding-right: 20px;">Vis</a>
                <form method="POST" action="/slett-bestilling/{{ o.id }}" class="inline-form">
                    <button type="submit" onclick="return confirm('Er du sikker pÃ¥ at du vil slette bestillingen?');">
                        ğŸ—‘ï¸ Slett
                    </button>
                </form>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>

    {% include "navigation/back_to_top.html" %}
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>

</html>